---
  - hosts: localhost
    gather_facts: no
    connection: localhost
    tasks:
      - name: Set Region
        set_fact: region_id="1"
        when: region == "Abu_Dhabi"
      - name: Set Region
        set_fact: region_id="2"
        when: region == "Dubai"
      - name: Set Region
        set_fact: region_id="3"
        when: region == "Old_Abu_Dhabi"

      - name: Read Tenants from CSV file and return ID
        read_csv:
          path: tenant.csv
          key: tenant_name
        register: tenants
        
      - name: Set Facts
        set_fact:
          tenant_name: |
            {{ tenants.list | map('combine', { "tenant_name": "{{ lookup('tenant') }}"}) }}
          tenant_id: |
            {{ tenants.list | map('combine', { "tenant_id": "{{ lookup('tenant') }}"}) }}
